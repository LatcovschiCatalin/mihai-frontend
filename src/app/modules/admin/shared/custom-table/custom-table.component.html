<div class="item-content">
  <div class="header">
    <div class="section-title">{{tableConfig.title}}</div>
    <div class="img-button" *ngIf="tableConfig.addData">
      <img (click)="onAction('get')"
           [src]="'assets/icons/add.svg'">
    </div>
  </div>
  <div class="smart-table">
    <div class="sort">
      <div class="arrange-array">
        <div class="sort-buttons">
          <div class="img-button" (click)="showSort(true)">
            <img [src]="'assets/icons/sort.svg'">
          </div>
          <div class="clear" *ngIf="show_sort && data?.length>0"
               (click)="showSort(false)">
            <img [src]="'assets/icons/clear.svg'">
          </div>
        </div>
        <div class="search-section">
          <input matInput [placeholder]="'Search...'" class="search" [(ngModel)]="searchTerm"
                 (keyup.enter)="search()">
          <div class="img-button" (click)="search()">
            <img [src]="'assets/icons/search.svg'"></div>
        </div>
      </div>
    </div>
    <table
      mat-table
      [dataSource]="data"
      class="mat-elevation-z8 table"
      *ngIf="data?.length>0  && docs>0; else noTableData"
    >

      <div class="columns" *ngFor="let column of sourceColumns">
        <ng-container [matColumnDef]="column.key">
          <th class="columns-name"

              mat-header-cell
              *matHeaderCellDef
              (click)="sortData(column.key)"
              [ngStyle]="{width:fieldWidth + 'px', cursor:show_sort ? 'pointer' : ''}"
          >
            <div class="th-content">
              {{ column.name}}
              <img class="sort-img" *ngIf="column.key === sort; else asc"
                   [src]="'assets/icons/' + order.toLowerCase() +'.svg'">
              <ng-template #asc>
                <img class="sort-img" *ngIf="show_sort" [src]="'assets/icons/des.svg'">
              </ng-template>
            </div>

          </th>
          <td mat-cell *matCellDef="let el"
              [ngStyle]="{width:fieldWidth + 'px'}"
          >
            <a *ngIf="column.type === 'link'; else normal" [href]="column.href + el[column.key]">
              {{ el[column.key] }}
            </a>
            <ng-template #normal>
              <div *ngIf="column.type === 'quill'" class="template" [innerHTML]="el[column.key] | safeHtml"></div>
              <div *ngIf="column.type !== 'quill'">
                {{ el[column.key] }}
              </div>
            </ng-template>


          </td>
        </ng-container>
      </div>

      <div class="columns">
        <ng-container [matColumnDef]="'actions'" *ngIf="tableConfig?.actions?.length">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let el">
            <div class="actions"><img (click)="onAction(action.key, el._id)" *ngFor="let action of tableConfig?.actions"
                                      [src]="action.icon">
            </div>
          </td>
        </ng-container>
      </div>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <mat-paginator class="paginator"
                   [length]="docs"
                   [pageIndex]="page - 1"
                   [pageSizeOptions]="limit"
                   [pageSize]="limit_docs"
                   (page)="onPaginateChange($event)"
                   *ngIf="data?.length>0"
                   aria-label="Select page">
    </mat-paginator>

    <ng-template #noTableData>No data found.</ng-template>
  </div>
</div>
